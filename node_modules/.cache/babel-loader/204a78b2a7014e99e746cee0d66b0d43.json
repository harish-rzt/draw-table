{"ast":null,"code":"import _toConsumableArray from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/rzt/Github/draw-table/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Header from './components/Header/Header';\nimport drawRectangles from './components/SvgUtils/drawRectangles';\nimport drawSplitLine from './components/SvgUtils/drawSplitLine';\nimport { splitOrAddRow } from './components/SvgUtils/splitOrAddRow';\nimport { generateNewTable, getTableColCords, getTableCords, getTableRowCellCords, tableData } from './components/SvgUtils/tableData';\n\nvar getRelativeSVGPoints = function getRelativeSVGPoints(e, svgElement) {\n  var pt = svgElement.createSVGPoint();\n  pt.x = e.clientX;\n  pt.y = e.clientY;\n  var hoverCoordinates = pt.matrixTransform(svgElement.getScreenCTM().inverse());\n  return hoverCoordinates;\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      tableData: tableData,\n      mode: 'edit',\n      // view | edit,\n      editEntity: 'row',\n      // 'cell' | 'column' | 'row' | 'table'\n      editAction: 'split',\n      // 'merge' | 'delete' | 'split'\n      selectedItems: new Set([]),\n      splitLineCoordinates: null,\n      splitAxis: 'vertical',\n      // 'horizontal', 'vertical'\n      drawnTable: {}\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMouseMove = _this.handleMouseMove.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMouseOut = _this.handleMouseOut.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectMode = _this.selectMode.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectEditEntity = _this.selectEditEntity.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectEditAction = _this.selectEditAction.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectSplitAxis = _this.selectSplitAxis.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onMouseDraw = _this.onMouseDraw.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.createNextTable = _this.createNextTable.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.basedOnAction = _this.basedOnAction.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toDrawRow = _this.toDrawRow.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toDrawColumn = _this.toDrawColumn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"toDrawColumn\",\n    value: function toDrawColumn() {}\n  }, {\n    key: \"toDrawRow\",\n    value: function toDrawRow() {\n      var _this$state = this.state,\n          mode = _this$state.mode,\n          editAction = _this$state.editAction,\n          editEntity = _this$state.editEntity;\n\n      if (mode === 'edit' && editEntity === 'row') {\n        console.log('values');\n      }\n    }\n  }, {\n    key: \"basedOnAction\",\n    value: function basedOnAction(action) {\n      switch (action.name) {\n        case 'drawRow':\n          this.toDrawRow(action.e, action.item);\n          break;\n\n        case 'drawColumn':\n          this.toDrawColumn();\n          break;\n\n        default:\n          break;\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(e, item) {\n      var _this2 = this;\n\n      //    console.log('item ', item.id, ' hovered of type: ', item.type, ' for action: ', this.state.editAction, ' data: ', item);\n      var getLineCoordinates = function getLineCoordinates(item, hoverCoordinates, axis) {\n        var getLineCoordinatesByAxis = function getLineCoordinatesByAxis(item, hoverCoordinates, horizontalAxis) {\n          var itemWidth = item.width;\n          var itemHeight = item.height;\n\n          if (item.merged && item.colSpan > 1 && item.rowSpan > 1) {\n            itemWidth = item.mergedWidth;\n            itemHeight = item.mergedHeight;\n          }\n\n          return horizontalAxis ? {\n            x1: item.x,\n            y1: hoverCoordinates.y,\n            x2: item.x + itemWidth,\n            y2: hoverCoordinates.y\n          } : {\n            x1: hoverCoordinates.x,\n            y1: item.y,\n            x2: hoverCoordinates.x,\n            y2: item.y + itemHeight\n          };\n        };\n\n        if (item.type === 'row') {\n          return getLineCoordinatesByAxis(item, hoverCoordinates, true);\n        } else if (item.type === 'col') {\n          return getLineCoordinatesByAxis(item, hoverCoordinates, false);\n        }\n\n        return getLineCoordinatesByAxis(item, hoverCoordinates, _this2.state.splitAxis === 'horizontal');\n      };\n\n      if (this.state.mode !== 'view' && this.state.editAction === 'split') {\n        e.stopPropagation();\n        var pt = this.svgRef.createSVGPoint();\n        pt.x = e.clientX;\n        pt.y = e.clientY;\n        var hoverCoordinates = pt.matrixTransform(this.svgRef.getScreenCTM().inverse());\n        this.setState({\n          splitLineCoordinates: getLineCoordinates(item, hoverCoordinates)\n        }); // console.log({ l });\n        // console.log('item ', item.id, ' hovered of type: ', item.type, ' for action: ', this.state.editAction, e.clientX, e.clientY)\n        // const { selectedItems } = this.state;\n        // this.setState({\n        //   selectedItems: selectedItems.has(item.id) ?\n        //     (this.state.selectedItems.delete(item.id) && this.state.selectedItems) : this.state.selectedItems.add(item.id),\n        // })\n      } else {// highlightTableData();\n        }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e, item) {\n      var _this$state2 = this.state,\n          mode = _this$state2.mode,\n          editAction = _this$state2.editAction;\n      var values = this.basedOnAction({\n        name: 'drawRow',\n        e: e,\n        item: item\n      });\n      console.log('values', values);\n\n      if (mode !== 'view') {\n        e.stopPropagation();\n        var cords = {\n          x: e.nativeEvent.offsetX,\n          y: e.nativeEvent.offsetY\n        };\n        var newRows = splitOrAddRow({\n          cords: cords,\n          item: item,\n          tableRows: this.state.tableData.tableRows\n        });\n        console.log('newRows: ', newRows);\n        this.setState({\n          tableData: _objectSpread({}, tableData, {\n            tableRows: _toConsumableArray(newRows)\n          })\n        }); //      console.log('item ', item.id, ' clicked of type: ', item.type, ' for action: ', this.state.editAction);\n        //      if (editAction === 'split' && item.type === 'col') {\n        //        console.log('event: ', e.target);\n        //        console.log('item: ', item);\n        //      } else {\n        //        const { selectedItems } = this.state;\n        //        this.setState({\n        //          selectedItems: selectedItems.has(item.id) ?\n        //            (this.state.selectedItems.delete(item.id) && this.state.selectedItems) : this.state.selectedItems.add(item.id),\n        //        });\n        //      }\n        //    } else {\n        //      // highlightTableData();\n        //    }\n      }\n    }\n  }, {\n    key: \"handleMouseOut\",\n    value: function handleMouseOut(e, item) {\n      this.setState({\n        splitLineCoordinates: null\n      });\n    }\n  }, {\n    key: \"selectMode\",\n    value: function selectMode(e) {\n      this.setState({\n        mode: e.target.value,\n        selectedItems: new Set([])\n      });\n    }\n  }, {\n    key: \"selectEditEntity\",\n    value: function selectEditEntity(e) {\n      this.setState({\n        editEntity: e.target.value,\n        selectedItems: new Set([])\n      });\n    }\n  }, {\n    key: \"selectEditAction\",\n    value: function selectEditAction(e) {\n      this.setState({\n        editAction: e.target.value,\n        selectedItems: new Set([])\n      });\n    }\n  }, {\n    key: \"selectSplitAxis\",\n    value: function selectSplitAxis(e) {\n      this.setState({\n        splitAxis: e.target.value\n      });\n    }\n  }, {\n    key: \"onMouseDraw\",\n    value: function onMouseDraw(e) {\n      var p = getRelativeSVGPoints(e, this.tableDrawCanvasSvg);\n      console.log('mousemove p:', p);\n      this.setState({\n        drawnTable: _objectSpread({}, this.state.drawnTable, {\n          x2: p.x,\n          y2: p.y\n        })\n      });\n    }\n  }, {\n    key: \"createNextTable\",\n    value: function createNextTable(e) {\n      var getCoordinates = function getCoordinates(_ref) {\n        var x1 = _ref.x1,\n            y1 = _ref.y1,\n            x2 = _ref.x2,\n            y2 = _ref.y2;\n        return {\n          x: Math.min(x1, x2),\n          y: Math.min(y1, y2),\n          width: Math.abs(x2 - x1),\n          height: Math.abs(y2 - y1)\n        };\n      };\n\n      var tableObj = {\n        type: 'table',\n        coordinates: getCoordinates(this.state.drawnTable)\n      };\n      console.log('tableObj: ', tableObj);\n      var newTableData = generateNewTable(tableObj.coordinates);\n      this.setState({\n        tableData: newTableData\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          mode = _this$state3.mode,\n          editEntity = _this$state3.editEntity,\n          editAction = _this$state3.editAction,\n          selectedItems = _this$state3.selectedItems,\n          splitLineCoordinates = _this$state3.splitLineCoordinates;\n\n      var applyHiddenClassName = function applyHiddenClassName(entityName) {\n        return mode === 'edit' && editEntity !== entityName ? 'noDisplay' : '';\n      };\n\n      var tableClassNames = applyHiddenClassName('table');\n      var tableRowClassNames = mode === 'view' ? 'noDisplay' : applyHiddenClassName('row');\n      var tableColumnClassNames = mode === 'view' ? 'noDisplay' : applyHiddenClassName('column');\n      var tableCellClassNames = applyHiddenClassName('cell');\n      var showSplitAxisDropDown = mode === 'edit' && (editAction === 'split' || editAction === 'split') && (editEntity === 'table' || editEntity === 'cell');\n      var tableRowCellCords = getTableRowCellCords(this.state.tableData);\n      var entityCoordinatesList = [{\n        coordinates: getTableCords(this.state.tableData),\n        className: tableClassNames,\n        type: 'table'\n      }, {\n        coordinates: tableRowCellCords.tableRowCords,\n        type: 'row',\n        className: tableRowClassNames\n      }, {\n        coordinates: getTableColCords(this.state.tableData),\n        type: 'col',\n        className: tableColumnClassNames\n      }, {\n        coordinates: tableRowCellCords.tableCellCords,\n        type: 'cell',\n        className: tableCellClassNames\n      }];\n      var tableFigure = entityCoordinatesList.map(function (entityCoordinates) {\n        return drawRectangles(entityCoordinates.coordinates, entityCoordinates.className, selectedItems, _this3.handleClick, _this3.handleMouseMove, _this3.handleMouseOut);\n      }); //    console.log('width: ', this.state.drawnTable.x2 - this.state.drawnTable.x1);\n      //    console.log('height: ', this.state.drawnTable.y2 - this.state.drawnTable.y1);\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(Header, {\n        modeValue: this.state.mode,\n        onModeChange: this.selectMode,\n        editValue: this.state.editEntity,\n        onEditChange: this.selectEditEntity,\n        actionValue: this.state.editAction,\n        onActionChange: this.selectEditAction,\n        showAxisInput: showSplitAxisDropDown,\n        axisValue: this.state.splitAxis,\n        onAxisChange: this.selectSplitAxis,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"App-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"presentation-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        ref: function ref(r) {\n          return _this3.svgRef = r;\n        },\n        width: \"100%\",\n        height: \"100%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, tableFigure, splitLineCoordinates && drawSplitLine(splitLineCoordinates))), React.createElement(\"div\", {\n        className: \"canvas-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        ref: function ref(r) {\n          return _this3.tableDrawCanvasSvg = r;\n        },\n        width: \"100%\",\n        height: \"100%\",\n        style: {\n          background: 'white',\n          cursor: 'crosshair'\n        },\n        onMouseDown: function onMouseDown(e) {\n          var p = getRelativeSVGPoints(e, _this3.tableDrawCanvasSvg);\n          console.log({\n            p: p\n          });\n\n          _this3.setState({\n            drawnTable: {\n              x1: p.x,\n              y1: p.y\n            }\n          });\n\n          _this3.tableDrawCanvasSvg.addEventListener('mousemove', _this3.onMouseDraw);\n        },\n        onMouseUp: function onMouseUp() {\n          _this3.tableDrawCanvasSvg.removeEventListener('mousemove', _this3.onMouseDraw);\n        } // onMouseDown={() => {\n        //   const nextTableIndex = this.state.drawnTables.count();\n        //\n        // }}\n        // onMouseUp={}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, this.state.drawnTable.x1 && this.state.drawnTable.x2 && React.createElement(\"rect\", {\n        x: Math.min(this.state.drawnTable.x1, this.state.drawnTable.x2),\n        y: Math.min(this.state.drawnTable.y1, this.state.drawnTable.y2),\n        width: Math.abs(this.state.drawnTable.x2 - this.state.drawnTable.x1),\n        height: Math.abs(this.state.drawnTable.y2 - this.state.drawnTable.y1),\n        fill: \"transparent\",\n        stroke: \"black\" // className={className}\n        // onClick={onClick}\n        // onMouseMove={onMouseMove}\n        // onMouseOut={onMouseOut}\n        // fillOpacity={fillOpacity}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, this.state.drawnTable.x1 && this.state.drawnTable.x2 && React.createElement(\"button\", {\n        className: \"footer-btn\",\n        onClick: this.createNextTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, \"Create Table\")));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/rzt/Github/draw-table/src/App.js"],"names":["React","Component","Header","drawRectangles","drawSplitLine","splitOrAddRow","generateNewTable","getTableColCords","getTableCords","getTableRowCellCords","tableData","getRelativeSVGPoints","e","svgElement","pt","createSVGPoint","x","clientX","y","clientY","hoverCoordinates","matrixTransform","getScreenCTM","inverse","App","props","state","mode","editEntity","editAction","selectedItems","Set","splitLineCoordinates","splitAxis","drawnTable","handleClick","bind","handleMouseMove","handleMouseOut","selectMode","selectEditEntity","selectEditAction","selectSplitAxis","onMouseDraw","createNextTable","basedOnAction","toDrawRow","toDrawColumn","console","log","action","name","item","getLineCoordinates","axis","getLineCoordinatesByAxis","horizontalAxis","itemWidth","width","itemHeight","height","merged","colSpan","rowSpan","mergedWidth","mergedHeight","x1","y1","x2","y2","type","stopPropagation","svgRef","setState","values","cords","nativeEvent","offsetX","offsetY","newRows","tableRows","target","value","p","tableDrawCanvasSvg","getCoordinates","Math","min","abs","tableObj","coordinates","newTableData","applyHiddenClassName","entityName","tableClassNames","tableRowClassNames","tableColumnClassNames","tableCellClassNames","showSplitAxisDropDown","tableRowCellCords","entityCoordinatesList","className","tableRowCords","tableCellCords","tableFigure","map","entityCoordinates","r","background","cursor","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Header from './components/Header/Header';\nimport drawRectangles from './components/SvgUtils/drawRectangles';\nimport drawSplitLine from './components/SvgUtils/drawSplitLine';\nimport { splitOrAddRow } from './components/SvgUtils/splitOrAddRow';\nimport {\n  generateNewTable,\n  getTableColCords,\n  getTableCords,\n  getTableRowCellCords,\n  tableData,\n} from './components/SvgUtils/tableData';\n\nconst getRelativeSVGPoints = (e, svgElement) => {\n  let pt = svgElement.createSVGPoint();\n  pt.x = e.clientX;\n  pt.y = e.clientY;\n  const hoverCoordinates = pt.matrixTransform(svgElement.getScreenCTM().inverse());\n  return hoverCoordinates;\n};\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tableData: tableData,\n      mode: 'edit', // view | edit,\n      editEntity: 'row', // 'cell' | 'column' | 'row' | 'table'\n      editAction: 'split', // 'merge' | 'delete' | 'split'\n      selectedItems: new Set([]),\n      splitLineCoordinates: null,\n      splitAxis: 'vertical', // 'horizontal', 'vertical'\n      drawnTable: {},\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseOut = this.handleMouseOut.bind(this);\n    this.selectMode = this.selectMode.bind(this);\n    this.selectEditEntity = this.selectEditEntity.bind(this);\n    this.selectEditAction = this.selectEditAction.bind(this);\n    this.selectSplitAxis = this.selectSplitAxis.bind(this);\n    this.onMouseDraw = this.onMouseDraw.bind(this);\n    this.createNextTable = this.createNextTable.bind(this);\n    this.basedOnAction = this.basedOnAction.bind(this);\n    this.toDrawRow = this.toDrawRow.bind(this);\n    this.toDrawColumn = this.toDrawColumn.bind(this);\n  }\n\n  toDrawColumn() {\n\n  }\n\n  toDrawRow() {\n    const { mode, editAction, editEntity } = this.state;\n\n    if((mode === 'edit') && editEntity === 'row') {\n\n      console.log('values');\n\n    }\n  }\n\n\n  basedOnAction(action) {\n    switch (action.name) {\n      case 'drawRow':\n        this.toDrawRow(action.e, action.item);\n        break;\n      case 'drawColumn':\n        this.toDrawColumn();\n        break;\n      default:\n        break;\n    }\n  }\n\n  handleMouseMove(e, item) {\n//    console.log('item ', item.id, ' hovered of type: ', item.type, ' for action: ', this.state.editAction, ' data: ', item);\n    const getLineCoordinates = (item, hoverCoordinates, axis) => {\n      const getLineCoordinatesByAxis = (item, hoverCoordinates, horizontalAxis) => {\n        let itemWidth = item.width;\n        let itemHeight = item.height;\n        if (item.merged && (item.colSpan > 1 && item.rowSpan > 1)) {\n          itemWidth = item.mergedWidth;\n          itemHeight = item.mergedHeight;\n        }\n        return (\n          horizontalAxis ? ({\n            x1: item.x,\n            y1: hoverCoordinates.y,\n            x2: item.x + itemWidth,\n            y2: hoverCoordinates.y,\n          }) : ({\n            x1: hoverCoordinates.x,\n            y1: item.y,\n            x2: hoverCoordinates.x,\n            y2: item.y + itemHeight,\n          })\n        );\n      };\n      if (item.type === 'row') {\n        return getLineCoordinatesByAxis(item, hoverCoordinates, true);\n      } else if (item.type === 'col') {\n        return getLineCoordinatesByAxis(item, hoverCoordinates, false);\n      }\n      return getLineCoordinatesByAxis(item, hoverCoordinates, this.state.splitAxis === 'horizontal');\n    };\n\n    if (this.state.mode !== 'view' && this.state.editAction === 'split') {\n      e.stopPropagation();\n      let pt = this.svgRef.createSVGPoint();\n      pt.x = e.clientX;\n      pt.y = e.clientY;\n      const hoverCoordinates = pt.matrixTransform(this.svgRef.getScreenCTM().inverse());\n      this.setState({\n        splitLineCoordinates: getLineCoordinates(item, hoverCoordinates),\n      });\n      // console.log({ l });\n      // console.log('item ', item.id, ' hovered of type: ', item.type, ' for action: ', this.state.editAction, e.clientX, e.clientY)\n      // const { selectedItems } = this.state;\n      // this.setState({\n      //   selectedItems: selectedItems.has(item.id) ?\n      //     (this.state.selectedItems.delete(item.id) && this.state.selectedItems) : this.state.selectedItems.add(item.id),\n      // })\n    } else {\n      // highlightTableData();\n    }\n  }\n\n  handleClick(e, item) {\n    const { mode, editAction } = this.state;\n    let values = this.basedOnAction({ name: 'drawRow', e, item });\n    console.log('values', values);\n\n    if (mode !== 'view') {\n      e.stopPropagation();\n      const cords = {\n        x: e.nativeEvent.offsetX,\n        y: e.nativeEvent.offsetY,\n      };\n      const newRows = splitOrAddRow({ cords, item, tableRows: this.state.tableData.tableRows });\n      console.log('newRows: ', newRows);\n      this.setState({\n        tableData: {\n          ...tableData,\n          tableRows: [...newRows],\n        },\n      });\n//      console.log('item ', item.id, ' clicked of type: ', item.type, ' for action: ', this.state.editAction);\n//      if (editAction === 'split' && item.type === 'col') {\n//        console.log('event: ', e.target);\n//        console.log('item: ', item);\n//      } else {\n//        const { selectedItems } = this.state;\n//        this.setState({\n//          selectedItems: selectedItems.has(item.id) ?\n//            (this.state.selectedItems.delete(item.id) && this.state.selectedItems) : this.state.selectedItems.add(item.id),\n//        });\n//      }\n//    } else {\n//      // highlightTableData();\n//    }\n    }\n  }\n\n  handleMouseOut(e, item) {\n    this.setState({\n      splitLineCoordinates: null,\n    });\n  }\n\n  selectMode(e) {\n    this.setState({\n      mode: e.target.value,\n      selectedItems: new Set([]),\n    });\n  }\n\n  selectEditEntity(e) {\n    this.setState({\n      editEntity: e.target.value,\n      selectedItems: new Set([]),\n    });\n  }\n\n  selectEditAction(e) {\n    this.setState({\n      editAction: e.target.value,\n      selectedItems: new Set([]),\n    });\n  }\n\n  selectSplitAxis(e) {\n    this.setState({\n      splitAxis: e.target.value,\n    });\n  }\n\n  onMouseDraw(e) {\n    const p = getRelativeSVGPoints(e, this.tableDrawCanvasSvg);\n    console.log('mousemove p:', p);\n    this.setState({\n      drawnTable: {\n        ...this.state.drawnTable,\n        x2: p.x,\n        y2: p.y,\n      },\n    });\n  }\n\n\n  createNextTable(e) {\n    const getCoordinates = ({ x1, y1, x2, y2 }) => ({\n      x: Math.min(x1, x2),\n      y: Math.min(y1, y2),\n      width: Math.abs(x2 - x1),\n      height: Math.abs(y2 - y1),\n    });\n    const tableObj = {\n      type: 'table',\n      coordinates: getCoordinates(this.state.drawnTable),\n    };\n    console.log('tableObj: ', tableObj);\n    const newTableData = generateNewTable(tableObj.coordinates);\n    this.setState({ tableData: newTableData });\n  }\n\n  render() {\n    const { mode, editEntity, editAction, selectedItems, splitLineCoordinates } = this.state;\n    const applyHiddenClassName = (entityName) => mode === 'edit' && editEntity !== entityName ? 'noDisplay' : '';\n\n    const tableClassNames = applyHiddenClassName('table');\n    const tableRowClassNames = mode === 'view' ? 'noDisplay' : applyHiddenClassName('row');\n    const tableColumnClassNames = mode === 'view' ? 'noDisplay' : applyHiddenClassName('column');\n    const tableCellClassNames = applyHiddenClassName('cell');\n    const showSplitAxisDropDown = (mode === 'edit')\n      && (editAction === 'split' || editAction === 'split')\n      && (editEntity === 'table' || editEntity === 'cell');\n\n    const tableRowCellCords = getTableRowCellCords(this.state.tableData);\n\n    const entityCoordinatesList = [\n      {\n        coordinates: getTableCords(this.state.tableData),\n        className: tableClassNames,\n        type: 'table',\n      },\n      {\n        coordinates: tableRowCellCords.tableRowCords,\n        type: 'row',\n        className: tableRowClassNames,\n\n      },\n      {\n        coordinates: getTableColCords(this.state.tableData),\n        type: 'col',\n        className: tableColumnClassNames,\n      },\n      {\n        coordinates: tableRowCellCords.tableCellCords,\n        type: 'cell',\n        className: tableCellClassNames,\n      },\n    ];\n\n    const tableFigure = entityCoordinatesList.map(entityCoordinates => drawRectangles(\n      entityCoordinates.coordinates,\n      entityCoordinates.className,\n      selectedItems,\n      this.handleClick,\n      this.handleMouseMove,\n      this.handleMouseOut,\n    ));\n\n//    console.log('width: ', this.state.drawnTable.x2 - this.state.drawnTable.x1);\n//    console.log('height: ', this.state.drawnTable.y2 - this.state.drawnTable.y1);\n\n    return (\n      <div className=\"App\">\n        <Header\n          modeValue={this.state.mode}\n          onModeChange={this.selectMode}\n          editValue={this.state.editEntity}\n          onEditChange={this.selectEditEntity}\n          actionValue={this.state.editAction}\n          onActionChange={this.selectEditAction}\n          showAxisInput={showSplitAxisDropDown}\n          axisValue={this.state.splitAxis}\n          onAxisChange={this.selectSplitAxis}\n        />\n        <div className=\"App-content\">\n          <div className=\"presentation-area\">\n            <svg\n              ref={r => this.svgRef = r}\n              width=\"100%\"\n              height=\"100%\">\n              {tableFigure}\n              {splitLineCoordinates && drawSplitLine(splitLineCoordinates)}\n            </svg>\n          </div>\n          <div className=\"canvas-area\">\n            <svg\n              ref={r => this.tableDrawCanvasSvg = r}\n              width=\"100%\"\n              height=\"100%\"\n              style={{ background: 'white', cursor: 'crosshair' }}\n              onMouseDown={(e) => {\n                const p = getRelativeSVGPoints(e, this.tableDrawCanvasSvg);\n                console.log({ p });\n                this.setState({\n                  drawnTable: {\n                    x1: p.x,\n                    y1: p.y,\n                  },\n                });\n                this.tableDrawCanvasSvg.addEventListener('mousemove', this.onMouseDraw);\n              }}\n              onMouseUp={() => {\n                this.tableDrawCanvasSvg.removeEventListener('mousemove', this.onMouseDraw);\n              }}\n              // onMouseDown={() => {\n              //   const nextTableIndex = this.state.drawnTables.count();\n              //\n              // }}\n              // onMouseUp={}\n            >\n              {\n                this.state.drawnTable.x1 &&\n                this.state.drawnTable.x2 &&\n                <rect\n                  x={Math.min(this.state.drawnTable.x1, this.state.drawnTable.x2)}\n                  y={Math.min(this.state.drawnTable.y1, this.state.drawnTable.y2)}\n                  width={Math.abs(this.state.drawnTable.x2 - this.state.drawnTable.x1)}\n                  height={Math.abs(this.state.drawnTable.y2 - this.state.drawnTable.y1)}\n                  fill=\"transparent\"\n                  stroke=\"black\"\n                  // className={className}\n                  // onClick={onClick}\n                  // onMouseMove={onMouseMove}\n                  // onMouseOut={onMouseOut}\n                  // fillOpacity={fillOpacity}\n                />\n              }\n            </svg>\n          </div>\n        </div>\n        <div className=\"footer\">\n          {this.state.drawnTable.x1 && this.state.drawnTable.x2 &&\n          <button className=\"footer-btn\" onClick={this.createNextTable}>\n            Create Table\n          </button>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
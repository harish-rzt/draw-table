{"ast":null,"code":"import _toConsumableArray from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/rzt/Github/draw-table/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/rzt/Github/draw-table/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Header from './components/Header/Header';\nimport drawRectangles from './components/SvgUtils/drawRectangles';\nimport drawSplitLine from './components/SvgUtils/drawSplitLine';\nimport { splitOrAddRow } from './components/SvgUtils/splitOrAddRow';\nimport { generateNewTable, getTableColCords, getTableCords, getTableRowCellCords, tableData } from './components/SvgUtils/tableData';\n\nvar getRelativeSVGPoints = function getRelativeSVGPoints(e, svgElement) {\n  var pt = svgElement.createSVGPoint();\n  pt.x = e.clientX;\n  pt.y = e.clientY;\n  var hoverCoordinates = pt.matrixTransform(svgElement.getScreenCTM().inverse());\n  return hoverCoordinates;\n};\n\nvar TableAction = {\n  ADD_ROW: 'addRow',\n  ADD_COL: 'addCol'\n};\n\nvar getTableAction = function getTableAction(mode, actionType, entity) {};\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      tableData: tableData,\n      mode: 'edit',\n      // view | edit,\n      editEntity: 'row',\n      // 'cell' | 'column' | 'row' | 'table'\n      editAction: 'split',\n      // 'merge' | 'delete' | 'split'\n      selectedItems: new Set([]),\n      splitLineCoordinates: null,\n      splitAxis: 'vertical',\n      // 'horizontal', 'vertical'\n      drawnTable: {}\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMouseMove = _this.handleMouseMove.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMouseOut = _this.handleMouseOut.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectMode = _this.selectMode.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectEditEntity = _this.selectEditEntity.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectEditAction = _this.selectEditAction.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectSplitAxis = _this.selectSplitAxis.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onMouseDraw = _this.onMouseDraw.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.createNextTable = _this.createNextTable.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.basedOnAction = _this.basedOnAction.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toDrawRow = _this.toDrawRow.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toDrawColumn = _this.toDrawColumn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"toDrawColumn\",\n    value: function toDrawColumn() {}\n  }, {\n    key: \"toDrawRow\",\n    value: function toDrawRow(e, item) {\n      var _this$state = this.state,\n          mode = _this$state.mode,\n          editAction = _this$state.editAction,\n          editEntity = _this$state.editEntity;\n\n      if (mode === 'edit' && editEntity === 'row' && editAction === 'split') {\n        e.stopPropagation();\n        console.log('values');\n        var cords = {\n          x: e.nativeEvent.offsetX,\n          y: e.nativeEvent.offsetY\n        };\n        var newRows = splitOrAddRow({\n          cords: cords,\n          item: item,\n          tableRows: this.state.tableData.tableRows\n        });\n        console.log('newRows: ', newRows);\n        this.setState({\n          tableData: _objectSpread({}, tableData, {\n            tableRows: _toConsumableArray(newRows)\n          })\n        });\n      }\n    }\n  }, {\n    key: \"basedOnAction\",\n    value: function basedOnAction(action) {\n      switch (action.name) {\n        case 'drawRow':\n          this.toDrawRow(action.e, action.item);\n          break;\n\n        case 'drawColumn':\n          this.toDrawColumn();\n          break;\n\n        default:\n          break;\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(e, item) {\n      var _this2 = this;\n\n      //    console.log('item ', item.id, ' hovered of type: ', item.type, ' for action: ', this.state.editAction, ' data: ', item);\n      var getLineCoordinates = function getLineCoordinates(item, hoverCoordinates, axis) {\n        var getLineCoordinatesByAxis = function getLineCoordinatesByAxis(item, hoverCoordinates, horizontalAxis) {\n          var itemWidth = item.width;\n          var itemHeight = item.height;\n\n          if (item.merged && item.colSpan > 1 && item.rowSpan > 1) {\n            itemWidth = item.mergedWidth;\n            itemHeight = item.mergedHeight;\n          }\n\n          return horizontalAxis ? {\n            x1: item.x,\n            y1: hoverCoordinates.y,\n            x2: item.x + itemWidth,\n            y2: hoverCoordinates.y\n          } : {\n            x1: hoverCoordinates.x,\n            y1: item.y,\n            x2: hoverCoordinates.x,\n            y2: item.y + itemHeight\n          };\n        };\n\n        if (item.type === 'row') {\n          return getLineCoordinatesByAxis(item, hoverCoordinates, true);\n        } else if (item.type === 'col') {\n          return getLineCoordinatesByAxis(item, hoverCoordinates, false);\n        }\n\n        return getLineCoordinatesByAxis(item, hoverCoordinates, _this2.state.splitAxis === 'horizontal');\n      };\n\n      if (this.state.mode !== 'view' && this.state.editAction === 'split') {\n        e.stopPropagation();\n        var pt = this.svgRef.createSVGPoint();\n        pt.x = e.clientX;\n        pt.y = e.clientY;\n        var hoverCoordinates = pt.matrixTransform(this.svgRef.getScreenCTM().inverse());\n        this.setState({\n          splitLineCoordinates: getLineCoordinates(item, hoverCoordinates)\n        }); // console.log({ l });\n        // console.log('item ', item.id, ' hovered of type: ', item.type, ' for action: ', this.state.editAction, e.clientX, e.clientY)\n        // const { selectedItems } = this.state;\n        // this.setState({\n        //   selectedItems: selectedItems.has(item.id) ?\n        //     (this.state.selectedItems.delete(item.id) && this.state.selectedItems) : this.state.selectedItems.add(item.id),\n        // })\n      } else {// highlightTableData();\n        }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e, item) {\n      var actionType = getTableAction(mode);\n      var createRow = this.basedOnAction({\n        name: 'drawRow',\n        e: e,\n        item: item\n      });\n      console.log('values', createRow);\n    }\n  }, {\n    key: \"handleMouseOut\",\n    value: function handleMouseOut(e, item) {\n      this.setState({\n        splitLineCoordinates: null\n      });\n    }\n  }, {\n    key: \"selectMode\",\n    value: function selectMode(e) {\n      this.setState({\n        mode: e.target.value,\n        selectedItems: new Set([])\n      });\n    }\n  }, {\n    key: \"selectEditEntity\",\n    value: function selectEditEntity(e) {\n      this.setState({\n        editEntity: e.target.value,\n        selectedItems: new Set([])\n      });\n    }\n  }, {\n    key: \"selectEditAction\",\n    value: function selectEditAction(e) {\n      this.setState({\n        editAction: e.target.value,\n        selectedItems: new Set([])\n      });\n    }\n  }, {\n    key: \"selectSplitAxis\",\n    value: function selectSplitAxis(e) {\n      this.setState({\n        splitAxis: e.target.value\n      });\n    }\n  }, {\n    key: \"onMouseDraw\",\n    value: function onMouseDraw(e) {\n      var p = getRelativeSVGPoints(e, this.tableDrawCanvasSvg);\n      console.log('mousemove p:', p);\n      this.setState({\n        drawnTable: _objectSpread({}, this.state.drawnTable, {\n          x2: p.x,\n          y2: p.y\n        })\n      });\n    }\n  }, {\n    key: \"createNextTable\",\n    value: function createNextTable(e) {\n      var getCoordinates = function getCoordinates(_ref) {\n        var x1 = _ref.x1,\n            y1 = _ref.y1,\n            x2 = _ref.x2,\n            y2 = _ref.y2;\n        return {\n          x: Math.min(x1, x2),\n          y: Math.min(y1, y2),\n          width: Math.abs(x2 - x1),\n          height: Math.abs(y2 - y1)\n        };\n      };\n\n      var tableObj = {\n        type: 'table',\n        coordinates: getCoordinates(this.state.drawnTable)\n      };\n      console.log('tableObj: ', tableObj);\n      var newTableData = generateNewTable(tableObj.coordinates);\n      this.setState({\n        tableData: newTableData\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          mode = _this$state2.mode,\n          editEntity = _this$state2.editEntity,\n          editAction = _this$state2.editAction,\n          selectedItems = _this$state2.selectedItems,\n          splitLineCoordinates = _this$state2.splitLineCoordinates;\n\n      var applyHiddenClassName = function applyHiddenClassName(entityName) {\n        return mode === 'edit' && editEntity !== entityName ? 'noDisplay' : '';\n      };\n\n      var tableClassNames = applyHiddenClassName('table');\n      var tableRowClassNames = mode === 'view' ? 'noDisplay' : applyHiddenClassName('row');\n      var tableColumnClassNames = mode === 'view' ? 'noDisplay' : applyHiddenClassName('column');\n      var tableCellClassNames = applyHiddenClassName('cell');\n      var showSplitAxisDropDown = mode === 'edit' && (editAction === 'split' || editAction === 'split') && (editEntity === 'table' || editEntity === 'cell');\n      var tableRowCellCords = getTableRowCellCords(this.state.tableData);\n      var entityCoordinatesList = [{\n        coordinates: getTableCords(this.state.tableData),\n        className: tableClassNames,\n        type: 'table'\n      }, {\n        coordinates: tableRowCellCords.tableRowCords,\n        type: 'row',\n        className: tableRowClassNames\n      }, {\n        coordinates: getTableColCords(this.state.tableData),\n        type: 'col',\n        className: tableColumnClassNames\n      }, {\n        coordinates: tableRowCellCords.tableCellCords,\n        type: 'cell',\n        className: tableCellClassNames\n      }];\n      var tableFigure = entityCoordinatesList.map(function (entityCoordinates) {\n        return drawRectangles(entityCoordinates.coordinates, entityCoordinates.className, selectedItems, _this3.handleClick, _this3.handleMouseMove, _this3.handleMouseOut);\n      }); //    console.log('width: ', this.state.drawnTable.x2 - this.state.drawnTable.x1);\n      //    console.log('height: ', this.state.drawnTable.y2 - this.state.drawnTable.y1);\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(Header, {\n        modeValue: this.state.mode,\n        onModeChange: this.selectMode,\n        editValue: this.state.editEntity,\n        onEditChange: this.selectEditEntity,\n        actionValue: this.state.editAction,\n        onActionChange: this.selectEditAction,\n        showAxisInput: showSplitAxisDropDown,\n        axisValue: this.state.splitAxis,\n        onAxisChange: this.selectSplitAxis,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"App-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"presentation-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        ref: function ref(r) {\n          return _this3.svgRef = r;\n        },\n        width: \"100%\",\n        height: \"100%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, tableFigure, splitLineCoordinates && drawSplitLine(splitLineCoordinates))), React.createElement(\"div\", {\n        className: \"canvas-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        ref: function ref(r) {\n          return _this3.tableDrawCanvasSvg = r;\n        },\n        width: \"100%\",\n        height: \"100%\",\n        style: {\n          background: 'white',\n          cursor: 'crosshair'\n        },\n        onMouseDown: function onMouseDown(e) {\n          var p = getRelativeSVGPoints(e, _this3.tableDrawCanvasSvg);\n          console.log({\n            p: p\n          });\n\n          _this3.setState({\n            drawnTable: {\n              x1: p.x,\n              y1: p.y\n            }\n          });\n\n          _this3.tableDrawCanvasSvg.addEventListener('mousemove', _this3.onMouseDraw);\n        },\n        onMouseUp: function onMouseUp() {\n          _this3.tableDrawCanvasSvg.removeEventListener('mousemove', _this3.onMouseDraw);\n        } // onMouseDown={() => {\n        //   const nextTableIndex = this.state.drawnTables.count();\n        //\n        // }}\n        // onMouseUp={}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, this.state.drawnTable.x1 && this.state.drawnTable.x2 && React.createElement(\"rect\", {\n        x: Math.min(this.state.drawnTable.x1, this.state.drawnTable.x2),\n        y: Math.min(this.state.drawnTable.y1, this.state.drawnTable.y2),\n        width: Math.abs(this.state.drawnTable.x2 - this.state.drawnTable.x1),\n        height: Math.abs(this.state.drawnTable.y2 - this.state.drawnTable.y1),\n        fill: \"transparent\",\n        stroke: \"black\" // className={className}\n        // onClick={onClick}\n        // onMouseMove={onMouseMove}\n        // onMouseOut={onMouseOut}\n        // fillOpacity={fillOpacity}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, this.state.drawnTable.x1 && this.state.drawnTable.x2 && React.createElement(\"button\", {\n        className: \"footer-btn\",\n        onClick: this.createNextTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, \"Create Table\")));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/rzt/Github/draw-table/src/App.js"],"names":["React","Component","Header","drawRectangles","drawSplitLine","splitOrAddRow","generateNewTable","getTableColCords","getTableCords","getTableRowCellCords","tableData","getRelativeSVGPoints","e","svgElement","pt","createSVGPoint","x","clientX","y","clientY","hoverCoordinates","matrixTransform","getScreenCTM","inverse","TableAction","ADD_ROW","ADD_COL","getTableAction","mode","actionType","entity","App","props","state","editEntity","editAction","selectedItems","Set","splitLineCoordinates","splitAxis","drawnTable","handleClick","bind","handleMouseMove","handleMouseOut","selectMode","selectEditEntity","selectEditAction","selectSplitAxis","onMouseDraw","createNextTable","basedOnAction","toDrawRow","toDrawColumn","item","stopPropagation","console","log","cords","nativeEvent","offsetX","offsetY","newRows","tableRows","setState","action","name","getLineCoordinates","axis","getLineCoordinatesByAxis","horizontalAxis","itemWidth","width","itemHeight","height","merged","colSpan","rowSpan","mergedWidth","mergedHeight","x1","y1","x2","y2","type","svgRef","createRow","target","value","p","tableDrawCanvasSvg","getCoordinates","Math","min","abs","tableObj","coordinates","newTableData","applyHiddenClassName","entityName","tableClassNames","tableRowClassNames","tableColumnClassNames","tableCellClassNames","showSplitAxisDropDown","tableRowCellCords","entityCoordinatesList","className","tableRowCords","tableCellCords","tableFigure","map","entityCoordinates","r","background","cursor","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Header from './components/Header/Header';\nimport drawRectangles from './components/SvgUtils/drawRectangles';\nimport drawSplitLine from './components/SvgUtils/drawSplitLine';\nimport { splitOrAddRow } from './components/SvgUtils/splitOrAddRow';\nimport {\n  generateNewTable,\n  getTableColCords,\n  getTableCords,\n  getTableRowCellCords,\n  tableData,\n} from './components/SvgUtils/tableData';\n\nconst getRelativeSVGPoints = (e, svgElement) => {\n  let pt = svgElement.createSVGPoint();\n  pt.x = e.clientX;\n  pt.y = e.clientY;\n  const hoverCoordinates = pt.matrixTransform(svgElement.getScreenCTM().inverse());\n  return hoverCoordinates;\n};\n\nconst TableAction = {\n  ADD_ROW: 'addRow',\n  ADD_COL: 'addCol',\n};\n\nconst getTableAction = (mode, actionType, entity) => {\n\n};\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tableData: tableData,\n      mode: 'edit', // view | edit,\n      editEntity: 'row', // 'cell' | 'column' | 'row' | 'table'\n      editAction: 'split', // 'merge' | 'delete' | 'split'\n      selectedItems: new Set([]),\n      splitLineCoordinates: null,\n      splitAxis: 'vertical', // 'horizontal', 'vertical'\n      drawnTable: {},\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseOut = this.handleMouseOut.bind(this);\n    this.selectMode = this.selectMode.bind(this);\n    this.selectEditEntity = this.selectEditEntity.bind(this);\n    this.selectEditAction = this.selectEditAction.bind(this);\n    this.selectSplitAxis = this.selectSplitAxis.bind(this);\n    this.onMouseDraw = this.onMouseDraw.bind(this);\n    this.createNextTable = this.createNextTable.bind(this);\n    this.basedOnAction = this.basedOnAction.bind(this);\n    this.toDrawRow = this.toDrawRow.bind(this);\n    this.toDrawColumn = this.toDrawColumn.bind(this);\n  }\n\n  toDrawColumn() {\n\n  }\n\n  toDrawRow(e, item) {\n    const { mode, editAction, editEntity } = this.state;\n    if (mode === 'edit' && editEntity === 'row' && editAction === 'split') {\n      e.stopPropagation();\n      console.log('values');\n      const cords = {\n        x: e.nativeEvent.offsetX,\n        y: e.nativeEvent.offsetY,\n      };\n      const newRows = splitOrAddRow({ cords, item, tableRows: this.state.tableData.tableRows });\n      console.log('newRows: ', newRows);\n      this.setState({\n        tableData: {\n          ...tableData,\n          tableRows: [...newRows],\n        },\n      });\n    }\n  }\n\n  basedOnAction(action) {\n    switch (action.name) {\n      case 'drawRow':\n        this.toDrawRow(action.e, action.item);\n        break;\n      case 'drawColumn':\n        this.toDrawColumn();\n        break;\n      default:\n        break;\n    }\n  }\n\n  handleMouseMove(e, item) {\n//    console.log('item ', item.id, ' hovered of type: ', item.type, ' for action: ', this.state.editAction, ' data: ', item);\n    const getLineCoordinates = (item, hoverCoordinates, axis) => {\n      const getLineCoordinatesByAxis = (item, hoverCoordinates, horizontalAxis) => {\n        let itemWidth = item.width;\n        let itemHeight = item.height;\n        if (item.merged && (item.colSpan > 1 && item.rowSpan > 1)) {\n          itemWidth = item.mergedWidth;\n          itemHeight = item.mergedHeight;\n        }\n        return (\n          horizontalAxis ? ({\n            x1: item.x,\n            y1: hoverCoordinates.y,\n            x2: item.x + itemWidth,\n            y2: hoverCoordinates.y,\n          }) : ({\n            x1: hoverCoordinates.x,\n            y1: item.y,\n            x2: hoverCoordinates.x,\n            y2: item.y + itemHeight,\n          })\n        );\n      };\n      if (item.type === 'row') {\n        return getLineCoordinatesByAxis(item, hoverCoordinates, true);\n      } else if (item.type === 'col') {\n        return getLineCoordinatesByAxis(item, hoverCoordinates, false);\n      }\n      return getLineCoordinatesByAxis(item, hoverCoordinates, this.state.splitAxis === 'horizontal');\n    };\n\n    if (this.state.mode !== 'view' && this.state.editAction === 'split') {\n      e.stopPropagation();\n      let pt = this.svgRef.createSVGPoint();\n      pt.x = e.clientX;\n      pt.y = e.clientY;\n      const hoverCoordinates = pt.matrixTransform(this.svgRef.getScreenCTM().inverse());\n      this.setState({\n        splitLineCoordinates: getLineCoordinates(item, hoverCoordinates),\n      });\n      // console.log({ l });\n      // console.log('item ', item.id, ' hovered of type: ', item.type, ' for action: ', this.state.editAction, e.clientX, e.clientY)\n      // const { selectedItems } = this.state;\n      // this.setState({\n      //   selectedItems: selectedItems.has(item.id) ?\n      //     (this.state.selectedItems.delete(item.id) && this.state.selectedItems) : this.state.selectedItems.add(item.id),\n      // })\n    } else {\n      // highlightTableData();\n    }\n  }\n\n  handleClick(e, item) {\n\n    const actionType = getTableAction(mode);\n\n    const createRow = this.basedOnAction({ name: 'drawRow', e, item });\n    console.log('values', createRow);\n  }\n\n  handleMouseOut(e, item) {\n    this.setState({\n      splitLineCoordinates: null,\n    });\n  }\n\n  selectMode(e) {\n    this.setState({\n      mode: e.target.value,\n      selectedItems: new Set([]),\n    });\n  }\n\n  selectEditEntity(e) {\n    this.setState({\n      editEntity: e.target.value,\n      selectedItems: new Set([]),\n    });\n  }\n\n  selectEditAction(e) {\n    this.setState({\n      editAction: e.target.value,\n      selectedItems: new Set([]),\n    });\n  }\n\n  selectSplitAxis(e) {\n    this.setState({\n      splitAxis: e.target.value,\n    });\n  }\n\n  onMouseDraw(e) {\n    const p = getRelativeSVGPoints(e, this.tableDrawCanvasSvg);\n    console.log('mousemove p:', p);\n    this.setState({\n      drawnTable: {\n        ...this.state.drawnTable,\n        x2: p.x,\n        y2: p.y,\n      },\n    });\n  }\n\n\n  createNextTable(e) {\n    const getCoordinates = ({ x1, y1, x2, y2 }) => ({\n      x: Math.min(x1, x2),\n      y: Math.min(y1, y2),\n      width: Math.abs(x2 - x1),\n      height: Math.abs(y2 - y1),\n    });\n    const tableObj = {\n      type: 'table',\n      coordinates: getCoordinates(this.state.drawnTable),\n    };\n    console.log('tableObj: ', tableObj);\n    const newTableData = generateNewTable(tableObj.coordinates);\n    this.setState({ tableData: newTableData });\n  }\n\n  render() {\n    const { mode, editEntity, editAction, selectedItems, splitLineCoordinates } = this.state;\n    const applyHiddenClassName = (entityName) => mode === 'edit' && editEntity !== entityName ? 'noDisplay' : '';\n\n    const tableClassNames = applyHiddenClassName('table');\n    const tableRowClassNames = mode === 'view' ? 'noDisplay' : applyHiddenClassName('row');\n    const tableColumnClassNames = mode === 'view' ? 'noDisplay' : applyHiddenClassName('column');\n    const tableCellClassNames = applyHiddenClassName('cell');\n    const showSplitAxisDropDown = (mode === 'edit')\n      && (editAction === 'split' || editAction === 'split')\n      && (editEntity === 'table' || editEntity === 'cell');\n\n    const tableRowCellCords = getTableRowCellCords(this.state.tableData);\n\n    const entityCoordinatesList = [\n      {\n        coordinates: getTableCords(this.state.tableData),\n        className: tableClassNames,\n        type: 'table',\n      },\n      {\n        coordinates: tableRowCellCords.tableRowCords,\n        type: 'row',\n        className: tableRowClassNames,\n\n      },\n      {\n        coordinates: getTableColCords(this.state.tableData),\n        type: 'col',\n        className: tableColumnClassNames,\n      },\n      {\n        coordinates: tableRowCellCords.tableCellCords,\n        type: 'cell',\n        className: tableCellClassNames,\n      },\n    ];\n\n    const tableFigure = entityCoordinatesList.map(entityCoordinates => drawRectangles(\n      entityCoordinates.coordinates,\n      entityCoordinates.className,\n      selectedItems,\n      this.handleClick,\n      this.handleMouseMove,\n      this.handleMouseOut,\n    ));\n\n//    console.log('width: ', this.state.drawnTable.x2 - this.state.drawnTable.x1);\n//    console.log('height: ', this.state.drawnTable.y2 - this.state.drawnTable.y1);\n\n    return (\n      <div className=\"App\">\n        <Header\n          modeValue={this.state.mode}\n          onModeChange={this.selectMode}\n          editValue={this.state.editEntity}\n          onEditChange={this.selectEditEntity}\n          actionValue={this.state.editAction}\n          onActionChange={this.selectEditAction}\n          showAxisInput={showSplitAxisDropDown}\n          axisValue={this.state.splitAxis}\n          onAxisChange={this.selectSplitAxis}\n        />\n        <div className=\"App-content\">\n          <div className=\"presentation-area\">\n            <svg\n              ref={r => this.svgRef = r}\n              width=\"100%\"\n              height=\"100%\">\n              {tableFigure}\n              {splitLineCoordinates && drawSplitLine(splitLineCoordinates)}\n            </svg>\n          </div>\n          <div className=\"canvas-area\">\n            <svg\n              ref={r => this.tableDrawCanvasSvg = r}\n              width=\"100%\"\n              height=\"100%\"\n              style={{ background: 'white', cursor: 'crosshair' }}\n              onMouseDown={(e) => {\n                const p = getRelativeSVGPoints(e, this.tableDrawCanvasSvg);\n                console.log({ p });\n                this.setState({\n                  drawnTable: {\n                    x1: p.x,\n                    y1: p.y,\n                  },\n                });\n                this.tableDrawCanvasSvg.addEventListener('mousemove', this.onMouseDraw);\n              }}\n              onMouseUp={() => {\n                this.tableDrawCanvasSvg.removeEventListener('mousemove', this.onMouseDraw);\n              }}\n              // onMouseDown={() => {\n              //   const nextTableIndex = this.state.drawnTables.count();\n              //\n              // }}\n              // onMouseUp={}\n            >\n              {\n                this.state.drawnTable.x1 &&\n                this.state.drawnTable.x2 &&\n                <rect\n                  x={Math.min(this.state.drawnTable.x1, this.state.drawnTable.x2)}\n                  y={Math.min(this.state.drawnTable.y1, this.state.drawnTable.y2)}\n                  width={Math.abs(this.state.drawnTable.x2 - this.state.drawnTable.x1)}\n                  height={Math.abs(this.state.drawnTable.y2 - this.state.drawnTable.y1)}\n                  fill=\"transparent\"\n                  stroke=\"black\"\n                  // className={className}\n                  // onClick={onClick}\n                  // onMouseMove={onMouseMove}\n                  // onMouseOut={onMouseOut}\n                  // fillOpacity={fillOpacity}\n                />\n              }\n            </svg>\n          </div>\n        </div>\n        <div className=\"footer\">\n          {this.state.drawnTable.x1 && this.state.drawnTable.x2 &&\n          <button className=\"footer-btn\" onClick={this.createNextTable}>\n            Create Table\n          </button>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}